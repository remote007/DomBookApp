<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/common.css">
    <link rel="stylesheet" href="./styles/form.css">
    <title>ADMIN</title>
</head>
<body>
    <div id="nav"></div>
    <form>
        <h3>Add New Books</h3>
        <label for="title_id">Title : </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input required id="title_id" type="text"><br>
        <label for="author_id">Author : </label>&nbsp;&nbsp;
        <input required id="author_id" type="text">
        <label for="author_id">Category : </label>
        <select required id="category_id">
            <option id = "opt0" hidden >Select Genre</option>
            <option id = "opt1" value="fiction">Fiction</option>
            <option id = "opt2" value="comedy">Comedy</option>
            <option id = "opt3" value="technical">Technical</option>
        </select>
        <div id="btn">
            <button type="button" onclick="addBooks()"><strong>ADD</strong></button>
        </div>
    </form>
</body>
<script src="./scripts/navbar.js"></script>
<script>
    if(localStorage.length==0)
    {
        alert("Admin Not Logged In")
        window.location.href = "index.html"; 
    }
    function addBooks(){
        event.preventDefault();
        var title = document.getElementById("title_id").value;
        var author = document.getElementById("author_id").value;
        var category = document.getElementById("category_id").value;
        var bookObj = {
            title,
            author,
            category,
            "isAvailable": true,
            "isVerified": false,
            "borrowedDays": null,
            "imageUrl": "https://m.media-amazon.com/images/I/71ZB18P3inL._SY522_.jpg"
        }
        console.log(bookObj);
        fetch("https://indecisive-coherent-scar.glitch.me/books",{
                method: "POST",
                headers: {
                    "content-type":"application/json",
                },
                body:JSON.stringify(bookObj),
            });
            alert("Book added successfully");
        }
</script>
</html>